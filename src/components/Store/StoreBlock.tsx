import { useState } from "react";
import style from "../../app/styles/pages/Store.module.scss";
import { ToogleSwitch } from "../ToogleSwitch";
import { StoreCard } from "../StoreCard";
import { initialStore } from "../../data/data";
import { StoreModal } from "../../ui/Modal/StoreModal";
import { StoreModalVolume } from "../../ui/Modal/StoreModalVolume";

export const StoreBlock:React.FC = () => {
  const [showModal, setShowModal] = useState(false);
  const [showStoreModalVolume, setShowStoreModalVolume] = useState(false);

  const handleOpenModal = () => {
    setShowModal(true);
  };

  const handleCloseModal = () => {
    setShowModal(false);
  };

  const handleOpenStoreModalVolume = () => {
    setShowStoreModalVolume(true);
  };

  const handleCloseStoreModalVolume = () => {
    setShowStoreModalVolume(false);
  };

  return (
    <>
      <div className={style.storeMain}>
        <h2>Enhancing water collection</h2>
        <div className={style.storeMainCards}>
          <div className={style.storeMainCard}>
            <div className={style.storeMainCardHeader}>
              <span>
                <ToogleSwitch />
              </span>
              <span>
                <svg
                  width="18"
                  height="20"
                  viewBox="0 0 18 20"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M3.975 20C3.45833 20 3.0125 19.8292 2.6375 19.4875C2.2625 19.1458 2.05 18.725 2 18.225L0 0H18L16 18.225C15.95 18.725 15.7375 19.1458 15.3625 19.4875C14.9875 19.8292 14.5417 20 14.025 20H3.975ZM2.9 8L4 18H14L15.1 8H2.9ZM2.65 6H15.35L15.75 2H2.25L2.65 6ZM9 15C8.76667 15 8.56667 14.9167 8.4 14.75C8.23333 14.5833 8.15 14.3833 8.15 14.15C8.15 13.9 8.22083 13.6125 8.3625 13.2875C8.50417 12.9625 8.71667 12.5917 9 12.175C9.28333 12.5917 9.49583 12.9625 9.6375 13.2875C9.77917 13.6125 9.85 13.9 9.85 14.15C9.85 14.3833 9.76667 14.5833 9.6 14.75C9.43333 14.9167 9.23333 15 9 15ZM9 17C9.8 17 10.475 16.725 11.025 16.175C11.575 15.625 11.85 14.95 11.85 14.15C11.85 13.4667 11.6292 12.725 11.1875 11.925C10.7458 11.125 10.0167 10.15 9 9C7.98333 10.15 7.25417 11.125 6.8125 11.925C6.37083 12.725 6.15 13.4667 6.15 14.15C6.15 14.95 6.425 15.625 6.975 16.175C7.525 16.725 8.2 17 9 17Z"
                    fill="black"
                  />
                </svg>
              </span>
              <span className={style.watch}>08:00</span>
            </div>
            <h3>Auto-collector</h3>
            <p>500 ml in 8 hours</p>
            <button onClick={handleOpenModal} className={style.storeBtn}>
              <span>
                <svg
                  width="8"
                  height="9"
                  viewBox="0 0 8 9"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M1.31667 8.23317L0.5 7.4165L4 3.9165L7.5 7.4165L6.68333 8.23317L4 5.56442L1.31667 8.23317ZM1.31667 4.73317L0.5 3.9165L4 0.416504L7.5 3.9165L6.68333 4.73317L4 2.06442L1.31667 4.73317Z"
                    fill="#006DF0"
                  />
                </svg>
              </span>
              Level 1 
            </button>
            <StoreModal 
               show={showModal}
               onClose={handleCloseModal}
              />
          </div>
          <div className={style.storeMainCard}>
            <div className={style.storeMainCardHeader}>
              <span>
                <svg
                  width="24"
                  height="16"
                  viewBox="0 0 24 16"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M8.44996 14.9C8.19996 15.0333 7.9458 15.0541 7.68746 14.9625C7.42913 14.8708 7.2333 14.7 7.09996 14.45L5.59996 11.45C5.46663 11.2 5.4458 10.9458 5.53746 10.6875C5.62913 10.4291 5.79996 10.2333 6.04996 10.1C6.29996 9.96663 6.55413 9.9458 6.81246 10.0375C7.0708 10.1291 7.26663 10.3 7.39996 10.55L8.89996 13.55C9.0333 13.8 9.05413 14.0541 8.96246 14.3125C8.8708 14.5708 8.69996 14.7666 8.44996 14.9ZM17.45 14.9C17.2 15.0333 16.9458 15.0541 16.6875 14.9625C16.4291 14.8708 16.2333 14.7 16.1 14.45L11.6 5.44996C11.4666 5.19996 11.4458 4.9458 11.5375 4.68746C11.6291 4.42913 11.8 4.2333 12.05 4.09996C12.3 3.96663 12.5541 3.9458 12.8125 4.03746C13.0708 4.12913 13.2666 4.29996 13.4 4.54996L17.9 13.55C18.0333 13.8 18.0541 14.0541 17.9625 14.3125C17.8708 14.5708 17.7 14.7666 17.45 14.9ZM12.75 15C12.4666 15 12.2291 14.9041 12.0375 14.7125C11.8458 14.5208 11.75 14.2833 11.75 14C11.75 13.7166 11.8458 13.4791 12.0375 13.2875C12.2291 13.0958 12.4666 13 12.75 13C13.0333 13 13.2708 13.0958 13.4625 13.2875C13.6541 13.4791 13.75 13.7166 13.75 14C13.75 14.2833 13.6541 14.5208 13.4625 14.7125C13.2708 14.9041 13.0333 15 12.75 15ZM22.45 14.9C22.2 15.0333 21.9458 15.0541 21.6875 14.9625C21.4291 14.8708 21.2333 14.7 21.1 14.45L20.6 13.45C20.4666 13.2 20.4458 12.9458 20.5375 12.6875C20.6291 12.4291 20.8 12.2333 21.05 12.1C21.3 11.9666 21.5541 11.9458 21.8125 12.0375C22.0708 12.1291 22.2666 12.3 22.4 12.55L22.9 13.55C23.0333 13.8 23.0541 14.0541 22.9625 14.3125C22.8708 14.5708 22.7 14.7666 22.45 14.9ZM11.45 11.9C11.2 12.0333 10.9458 12.0541 10.6875 11.9625C10.4291 11.8708 10.2333 11.7 10.1 11.45L5.59996 2.44996C5.46663 2.19996 5.4458 1.9458 5.53746 1.68746C5.62913 1.42913 5.79996 1.2333 6.04996 1.09996C6.29996 0.96663 6.55413 0.945797 6.81246 1.03746C7.0708 1.12913 7.26663 1.29996 7.39996 1.54996L11.9 10.55C12.0333 10.8 12.0541 11.0541 11.9625 11.3125C11.8708 11.5708 11.7 11.7666 11.45 11.9ZM20 11C19.7166 11 19.4791 10.9041 19.2875 10.7125C19.0958 10.5208 19 10.2833 19 9.99996C19 9.71663 19.0958 9.47913 19.2875 9.28746C19.4791 9.0958 19.7166 8.99996 20 8.99996C20.2833 8.99996 20.5208 9.0958 20.7125 9.28746C20.9041 9.47913 21 9.71663 21 9.99996C21 10.2833 20.9041 10.5208 20.7125 10.7125C20.5208 10.9041 20.2833 11 20 11ZM4.99996 8.99996C4.71663 8.99996 4.47913 8.90413 4.28746 8.71246C4.0958 8.5208 3.99996 8.2833 3.99996 7.99996C3.99996 7.71663 4.0958 7.47913 4.28746 7.28746C4.47913 7.0958 4.71663 6.99996 4.99996 6.99996C5.2833 6.99996 5.5208 7.0958 5.71246 7.28746C5.90413 7.47913 5.99996 7.71663 5.99996 7.99996C5.99996 8.2833 5.90413 8.5208 5.71246 8.71246C5.5208 8.90413 5.2833 8.99996 4.99996 8.99996ZM18.95 7.89996C18.7 8.0333 18.4458 8.05413 18.1875 7.96246C17.9291 7.8708 17.7333 7.69996 17.6 7.44996L15.1 2.44996C14.9666 2.19996 14.9458 1.9458 15.0375 1.68746C15.1291 1.42913 15.3 1.2333 15.55 1.09996C15.8 0.96663 16.0541 0.945797 16.3125 1.03746C16.5708 1.12913 16.7666 1.29996 16.9 1.54996L19.4 6.54996C19.5333 6.79996 19.5541 7.05413 19.4625 7.31246C19.3708 7.5708 19.2 7.76663 18.95 7.89996ZM3.94996 5.89996C3.69996 6.0333 3.4458 6.05413 3.18746 5.96246C2.92913 5.8708 2.7333 5.69996 2.59996 5.44996L1.09996 2.44996C0.96663 2.19996 0.945797 1.9458 1.03746 1.68746C1.12913 1.42913 1.29996 1.2333 1.54996 1.09996C1.79996 0.96663 2.05413 0.945797 2.31246 1.03746C2.5708 1.12913 2.76663 1.29996 2.89996 1.54996L4.39996 4.54996C4.5333 4.79996 4.55413 5.05413 4.46246 5.31246C4.3708 5.5708 4.19996 5.76663 3.94996 5.89996ZM11.25 2.99996C10.9666 2.99996 10.7291 2.90413 10.5375 2.71246C10.3458 2.5208 10.25 2.2833 10.25 1.99996C10.25 1.71663 10.3458 1.47913 10.5375 1.28746C10.7291 1.0958 10.9666 0.999964 11.25 0.999964C11.5333 0.999964 11.7708 1.0958 11.9625 1.28746C12.1541 1.47913 12.25 1.71663 12.25 1.99996C12.25 2.2833 12.1541 2.5208 11.9625 2.71246C11.7708 2.90413 11.5333 2.99996 11.25 2.99996Z"
                    fill="black"
                  />
                </svg>
              </span>
            </div>
            <h3>Precipitation volume</h3>
            <p>1000 drops per day</p>
            <button onClick={handleOpenStoreModalVolume} className={style.storeBtn}>
              <span>
                <svg
                  width="8"
                  height="9"
                  viewBox="0 0 8 9"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M1.31667 8.23317L0.5 7.4165L4 3.9165L7.5 7.4165L6.68333 8.23317L4 5.56442L1.31667 8.23317ZM1.31667 4.73317L0.5 3.9165L4 0.416504L7.5 3.9165L6.68333 4.73317L4 2.06442L1.31667 4.73317Z"
                    fill="#006DF0"
                  />
                </svg>
              </span>
              Level 1
            </button>
            <StoreModalVolume 
                 show={showStoreModalVolume}
                 onClose={handleCloseStoreModalVolume}
            />
          </div>
        </div>
      </div>
      <div className={style.storeCards}>
        {initialStore &&
          initialStore.map((item) => (
            <StoreCard
              lvl={item.lvl}
              image={item.image}
              title={item.title}
              volume={item.volume}
              bonus={item.bonus}
            />
          ))}
      </div>
    </>
  );
};
